
<html>
 
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<head>
<title>graph</title>
</head>
	
<style>
	.axis path,
	.axis line{
		fill:none;
		stroke:black;
		shape-rendering:crispEdges;
	}
</style>
 
 
<body>
	<!-- // <script src="d3/d3.js" charset="utf-8"></script> -->
<script src="http://d3js.org/d3.v3.min.js" charset="utf-8"></script>  
<script>

 
var width=1000;
var height=1000;
 
var dataset=[
	{
		coin:"BTC",
		pl :{{pl1}}
	}
];
 
var padding={top:300, right:300, bottom: 300, left:300};
var plmax1=0;
for(var i=0;i<dataset.length;i++){
	var currpl=d3.max(dataset[i].pl,function(d){
		return d[1];
	});
	if(currpl>plmax1)
		plmax1=currpl;
}
console.log(plmax1);
var plmin1=0;
for(var i=0;i<dataset.length;i++){
	var currpl=d3.min(dataset[i].pl,function(d){
		return d[1];
	});
	if(currpl<plmin1)
		plmin1=currpl;
}
console.log(plmin1);

var plmax2=0;
for(var i=0;i<dataset.length;i++){
	var currpl=d3.max(dataset[i].pl,function(d){
		return d[0];
	});
	if(currpl>plmax2)
		plmax2=currpl;
}
console.log(plmax2);
var plmin2=0;
for(var i=0;i<dataset.length;i++){
	var currpl=d3.min(dataset[i].pl,function(d){
		return d[0];
	});
	if(currpl>plmin2)
		plmin2=currpl;
}
console.log(plmin2);
 
var xScale=d3.scale.linear()
			.domain([plmin2,plmax2])
			.range([0,width-padding.left-padding.right]);
 
var yScale=d3.scale.linear()
			.domain([plmax1,plmin1])
			.range([0,width-padding.left-padding.right]);
 
 
var linePath=d3.svg.line()//创建一个直线生成器
				.x(function(d){
					return xScale(d[0]);
				})
				.y(function(d){
					return yScale(d[1]);
				})
				.interpolate("basis")//插值模式
				;
 
//定义两个颜色
var colors=[d3.rgb(0,0,255)];
 
var svg=d3.select("body")
				.append("svg")
				.attr("width",width)
				.attr("height",height);

 
svg.selectAll("path")
	.data(dataset)
	.enter()
	.append("path")
	.attr("transform","translate("+padding.left+","+padding.top+")")
	.attr("d",function(d){
		return linePath(d.pl);
		//返回线段生成器得到的路径
	})
	.attr("fill","none")
	.attr("stroke-width",3)
	.attr("stroke",function(d,i){
		return colors[i];
	});
 
var xAxis=d3.svg.axis()
			.scale(xScale)
			.ticks(5)
			.tickFormat(d3.format("d"))
			.orient("bottom");
 
var yAxis=d3.svg.axis()
			.scale(yScale)
			.orient("left");
 
//添加一个g用于放x轴
svg.append("g")
	.attr("class","axis")
	.attr("transform","translate("+padding.left+","+(height-padding.right)+")")
	.call(xAxis);
 
svg.append("g")
	.attr("class","axis")
	.attr("transform","translate("+padding.left+","+padding.right+")")
	.call(yAxis);
 
</script>
 
</body>
</html>